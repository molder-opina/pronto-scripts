-- Align pronto_orders schema with application expectations
ALTER TABLE pronto_orders
ADD COLUMN IF NOT EXISTS payment_status VARCHAR(20) DEFAULT 'pending',
ADD COLUMN IF NOT EXISTS payment_method VARCHAR(50),
ADD COLUMN IF NOT EXISTS payment_reference VARCHAR(100),
ADD COLUMN IF NOT EXISTS payment_meta JSONB,
ADD COLUMN IF NOT EXISTS total_amount NUMERIC(12, 2) DEFAULT 0.00,
ADD COLUMN IF NOT EXISTS tip_amount NUMERIC(12, 2) DEFAULT 0.00,
ADD COLUMN IF NOT EXISTS waiter_id UUID REFERENCES pronto_employees(id),
ADD COLUMN IF NOT EXISTS chef_id UUID REFERENCES pronto_employees(id),
ADD COLUMN IF NOT EXISTS delivery_waiter_id UUID REFERENCES pronto_employees(id),
ADD COLUMN IF NOT EXISTS accepted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS waiter_accepted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS chef_accepted_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS ready_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS delivered_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS check_requested_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS feedback_requested_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS feedback_completed_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS paid_at TIMESTAMP WITH TIME ZONE;
